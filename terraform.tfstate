{
  "version": 4,
  "terraform_version": "0.13.0",
  "serial": 15,
  "lineage": "bcdd2a48-ce31-9dbe-4cdb-6c4c63566019",
  "outputs": {
    "api_uris": {
      "value": {
        "GRAPHQL": "https://vt3neph6pbegln4r2bcx3xo7ce.appsync-api.us-west-2.amazonaws.com/graphql",
        "REALTIME": "wss://vt3neph6pbegln4r2bcx3xo7ce.appsync-realtime-api.us-west-2.amazonaws.com/graphql"
      },
      "type": [
        "map",
        "string"
      ]
    }
  },
  "resources": [
    {
      "module": "module.quizapi",
      "mode": "managed",
      "type": "aws_appsync_api_key",
      "name": "quiz_gql_api_key",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "syyzn5rehjbwzpakpnr555cxeu",
            "description": "Managed by Terraform",
            "expires": "2020-11-24T12:00:00Z",
            "id": "syyzn5rehjbwzpakpnr555cxeu:da2-764kaennlzhxpbgufdzyv2zz4a",
            "key": "da2-764kaennlzhxpbgufdzyv2zz4a"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.quizapi.aws_appsync_graphql_api.quiz_gql_api",
            "module.quizapi.aws_iam_role.graphqlapirole"
          ]
        }
      ]
    },
    {
      "module": "module.datasource",
      "mode": "managed",
      "type": "aws_appsync_datasource",
      "name": "dynamodb_tbl_datasource",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "syyzn5rehjbwzpakpnr555cxeu",
            "arn": "arn:aws:appsync:us-west-2:319794837620:apis/syyzn5rehjbwzpakpnr555cxeu/datasources/quizapp_dynamodb_tbl_datasource",
            "description": "",
            "dynamodb_config": [
              {
                "region": "us-west-2",
                "table_name": "QuizQuestions",
                "use_caller_credentials": false
              }
            ],
            "elasticsearch_config": [],
            "http_config": [],
            "id": "syyzn5rehjbwzpakpnr555cxeu-quizapp_dynamodb_tbl_datasource",
            "lambda_config": [],
            "name": "quizapp_dynamodb_tbl_datasource",
            "service_role_arn": "arn:aws:iam::319794837620:role/quizapp_dynamodb_access_role",
            "type": "AMAZON_DYNAMODB"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.datasource.aws_iam_role.dynamodb_access_role",
            "module.dynamodb.aws_dynamodb_table.quizapp-tbl",
            "module.quizapi.aws_appsync_graphql_api.quiz_gql_api"
          ]
        }
      ]
    },
    {
      "module": "module.quizapi",
      "mode": "managed",
      "type": "aws_appsync_graphql_api",
      "name": "quiz_gql_api",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "additional_authentication_provider": [],
            "arn": "arn:aws:appsync:us-west-2:319794837620:apis/syyzn5rehjbwzpakpnr555cxeu",
            "authentication_type": "API_KEY",
            "id": "syyzn5rehjbwzpakpnr555cxeu",
            "log_config": [
              {
                "cloudwatch_logs_role_arn": "arn:aws:iam::319794837620:role/graphql_api_role",
                "exclude_verbose_content": false,
                "field_log_level": "ALL"
              }
            ],
            "name": "QuizApp API",
            "openid_connect_config": [],
            "schema": "type Question {\r\n  id: ID!\r\n  text: String!\r\n  explanation: String\r\n  answers: [AWSJSON]\r\n}\r\n\r\ntype PaginatedQuestions {\r\n  nextToken: String\r\n  items: [Question]\r\n}\r\n\r\ntype Query {\r\n  getQuestion(id: ID!): Question\r\n  listQuestions(limit: Int, nextToken: String): PaginatedQuestions\r\n}\r\n\r\ninput CreateQuestionInput {\r\n  text: String!\r\n  explanation: String\r\n  answers: [AWSJSON]\r\n}\r\n\r\ntype Mutation {\r\n  createQuestion(input: CreateQuestionInput!): Question\r\n}\r\n",
            "tags": {},
            "uris": {
              "GRAPHQL": "https://vt3neph6pbegln4r2bcx3xo7ce.appsync-api.us-west-2.amazonaws.com/graphql",
              "REALTIME": "wss://vt3neph6pbegln4r2bcx3xo7ce.appsync-realtime-api.us-west-2.amazonaws.com/graphql"
            },
            "user_pool_config": [],
            "xray_enabled": false
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.quizapi.aws_iam_role.graphqlapirole"
          ]
        }
      ]
    },
    {
      "module": "module.resolver",
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "createQuestion_resolver",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "syyzn5rehjbwzpakpnr555cxeu",
            "arn": "arn:aws:appsync:us-west-2:319794837620:apis/syyzn5rehjbwzpakpnr555cxeu/types/Mutation/resolvers/createQuestion",
            "caching_config": [],
            "data_source": "quizapp_dynamodb_tbl_datasource",
            "field": "createQuestion",
            "id": "syyzn5rehjbwzpakpnr555cxeu-Mutation-createQuestion",
            "kind": "UNIT",
            "pipeline_config": [],
            "request_template": "{\r\n    \"version\" : \"2017-02-28\",\r\n    \"operation\" : \"PutItem\",\r\n    \"key\" : {\r\n        ## If object \"id\" should come from GraphQL arguments, change to $util.dynamodb.toDynamoDBJson($ctx.args.id)\r\n        \"id\": $util.dynamodb.toDynamoDBJson($util.autoId()),\r\n    },\r\n    \"attributeValues\" : $util.dynamodb.toMapValuesJson($ctx.args.input)\r\n}\r\n",
            "response_template": "$util.toJson($ctx.result)\r\n",
            "type": "Mutation"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.datasource.aws_appsync_datasource.dynamodb_tbl_datasource",
            "module.datasource.aws_iam_role.dynamodb_access_role",
            "module.dynamodb.aws_dynamodb_table.quizapp-tbl",
            "module.quizapi.aws_appsync_graphql_api.quiz_gql_api"
          ]
        }
      ]
    },
    {
      "module": "module.resolver",
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "getQuestion_resolver",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "syyzn5rehjbwzpakpnr555cxeu",
            "arn": "arn:aws:appsync:us-west-2:319794837620:apis/syyzn5rehjbwzpakpnr555cxeu/types/Query/resolvers/getQuestion",
            "caching_config": [],
            "data_source": "quizapp_dynamodb_tbl_datasource",
            "field": "getQuestion",
            "id": "syyzn5rehjbwzpakpnr555cxeu-Query-getQuestion",
            "kind": "UNIT",
            "pipeline_config": [],
            "request_template": "{\r\n    \"version\": \"2017-02-28\",\r\n    \"operation\": \"GetItem\",\r\n    \"key\": {\r\n        \"id\": $util.dynamodb.toDynamoDBJson($ctx.args.id),\r\n    }\r\n}\r\n",
            "response_template": "$util.toJson($ctx.result)\r\n",
            "type": "Query"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.datasource.aws_appsync_datasource.dynamodb_tbl_datasource",
            "module.quizapi.aws_appsync_graphql_api.quiz_gql_api",
            "module.quizapi.aws_iam_role.graphqlapirole"
          ]
        }
      ]
    },
    {
      "module": "module.resolver",
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "listQuestions_resolver",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "syyzn5rehjbwzpakpnr555cxeu",
            "arn": "arn:aws:appsync:us-west-2:319794837620:apis/syyzn5rehjbwzpakpnr555cxeu/types/Query/resolvers/listQuestions",
            "caching_config": [],
            "data_source": "quizapp_dynamodb_tbl_datasource",
            "field": "listQuestions",
            "id": "syyzn5rehjbwzpakpnr555cxeu-Query-listQuestions",
            "kind": "UNIT",
            "pipeline_config": [],
            "request_template": "{\r\n    \"version\" : \"2017-02-28\",\r\n    \"operation\" : \"Scan\",\r\n    \"limit\": $util.defaultIfNull($ctx.args.limit, 20),\r\n    \"nextToken\": $util.toJson($util.defaultIfNullOrBlank($ctx.args.nextToken, null))\r\n}\r\n",
            "response_template": "$util.toJson($ctx.result)\r\n",
            "type": "Query"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.datasource.aws_appsync_datasource.dynamodb_tbl_datasource",
            "module.quizapi.aws_appsync_graphql_api.quiz_gql_api",
            "module.quizapi.aws_iam_role.graphqlapirole"
          ]
        }
      ]
    },
    {
      "module": "module.dynamodb",
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "quizapp-tbl",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:us-west-2:319794837620:table/QuizQuestions",
            "attribute": [
              {
                "name": "id",
                "type": "S"
              }
            ],
            "billing_mode": "PROVISIONED",
            "global_secondary_index": [],
            "hash_key": "id",
            "id": "QuizQuestions",
            "local_secondary_index": [],
            "name": "QuizQuestions",
            "point_in_time_recovery": [
              {
                "enabled": false
              }
            ],
            "range_key": null,
            "read_capacity": 5,
            "replica": [],
            "server_side_encryption": [],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "tags": {
              "Environment": "dev",
              "Name": "quizapp-questions-table"
            },
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false
              }
            ],
            "write_capacity": 5
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjM2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "module": "module.datasource",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "dynamodb_access_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::319794837620:role/quizapp_dynamodb_access_role",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"appsync.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2020-11-19T12:46:50Z",
            "description": "",
            "force_detach_policies": false,
            "id": "quizapp_dynamodb_access_role",
            "max_session_duration": 3600,
            "name": "quizapp_dynamodb_access_role",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "unique_id": "AROAUU5KB7B2PRSZR6KXY"
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.quizapi",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "graphqlapirole",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::319794837620:role/graphql_api_role",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"appsync.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2020-11-17T12:44:38Z",
            "description": "",
            "force_detach_policies": false,
            "id": "graphql_api_role",
            "max_session_duration": 3600,
            "name": "graphql_api_role",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "unique_id": "AROAUU5KB7B2IMPFQDJ4K"
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.datasource",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "dynamodb_access_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "quizapp_dynamodb_access_role:quizapp_dynamodb_access_policy",
            "name": "quizapp_dynamodb_access_policy",
            "name_prefix": null,
            "policy": "{\r\n    \"Version\": \"2012-10-17\",\r\n    \"Statement\": [\r\n        {\r\n            \"Sid\": \"QuizQuestionsTable\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"dynamodb:BatchGetItem\",\r\n                \"dynamodb:BatchWriteItem\",\r\n                \"dynamodb:PutItem\",\r\n                \"dynamodb:DeleteItem\",\r\n                \"dynamodb:GetItem\",\r\n                \"dynamodb:Scan\",\r\n                \"dynamodb:Query\",\r\n                \"dynamodb:UpdateItem\"\r\n            ],\r\n            \"Resource\": [\r\n                \"arn:aws:dynamodb:*:*:table/QuizQuestions\",\r\n                \"arn:aws:dynamodb:*:*:table/QuizQuestions/*\"\r\n            ]\r\n        }\r\n    ]\r\n}\r\n",
            "role": "quizapp_dynamodb_access_role"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.datasource.aws_iam_role.dynamodb_access_role",
            "module.dynamodb.aws_dynamodb_table.quizapp-tbl"
          ]
        }
      ]
    },
    {
      "module": "module.quizapi",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "cw_log_policy_attach",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "graphql_api_role-20201117124440762300000001",
            "policy_arn": "arn:aws:iam::aws:policy/service-role/AWSAppSyncPushToCloudWatchLogs",
            "role": "graphql_api_role"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.quizapi.aws_iam_role.graphqlapirole"
          ]
        }
      ]
    }
  ]
}
